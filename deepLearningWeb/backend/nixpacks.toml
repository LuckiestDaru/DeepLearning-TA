# Konfigurasi Sistem untuk Railway
[packages]
python311 = "3.11"
ffmpeg = "latest"
libgl1 = "latest"
glib = "latest"

[phases.install]
# Strategi Perbaikan:
# 1. Install requirements (Mungkin opencv-python biasa ikut masuk)
# 2. Uninstall opencv-python biasa (Ini akan bikin folder cv2 hilang/rusak)
# 3. Force Re-install opencv-python-headless (Ini akan memperbaiki folder cv2 pakai versi headless)
cmds = [
    "python -m venv --copies /opt/venv && . /opt/venv/bin/activate && pip install -r requirements.txt",
    ". /opt/venv/bin/activate && pip uninstall -y opencv-python || true",
    ". /opt/venv/bin/activate && pip install --force-reinstall opencv-python-headless"
]

[start]
cmd = "/opt/venv/bin/python app.py"